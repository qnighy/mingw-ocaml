Index: mingw-ocaml/build/ocaml/byterun/win32.c
===================================================================
--- mingw-ocaml.orig/build/ocaml/byterun/win32.c	2013-03-22 18:31:05.280868358 -0500
+++ mingw-ocaml/build/ocaml/byterun/win32.c	2013-03-22 18:31:05.256880360 -0500
@@ -37,6 +37,26 @@
 
 #include "flexdll.h"
 
+/* XXX including <io.h> gets ../byterun/io.h for some reason.
+ * Including the real io.h using the full path fails because of
+ * some strange bug in the system header file itself.  Give up and
+ * just define _finddata_t explicitly here.
+ */
+#ifndef _FSIZE_T_DEFINED
+typedef unsigned long   _fsize_t;
+#define _FSIZE_T_DEFINED
+
+struct _finddata_t
+{
+  unsigned        attrib;
+  time_t          time_create;
+  time_t          time_access;
+  time_t          time_write;
+  _fsize_t        size;
+  char            name[FILENAME_MAX];
+};
+#endif
+
 #ifndef S_ISREG
 #define S_ISREG(mode) (((mode) & S_IFMT) == S_IFREG)
 #endif
@@ -95,7 +115,7 @@
   pathlen = strlen(name) + 1;
   if (pathlen < 256) pathlen = 256;
   while (1) {
-    fullname = stat_alloc(pathlen);
+    fullname = caml_stat_alloc(pathlen);
     retcode = SearchPath(NULL,              /* use system search path */
                          name,
                          ".exe",            /* add .exe extension if needed */
@@ -109,7 +129,7 @@
       break;
     }
     if (retcode < pathlen) break;
-    stat_free(fullname);
+    caml_stat_free(fullname);
     pathlen = retcode + 1;
   }
   return fullname;
@@ -482,4 +502,4 @@
   return 3;
 }
 
-#endif /* WIN32 */
+#endif
Index: mingw-ocaml/build/ocaml/otherlibs/systhreads/st_win32.h
===================================================================
--- mingw-ocaml.orig/build/ocaml/otherlibs/systhreads/st_win32.h	2013-03-22 18:31:05.280868358 -0500
+++ mingw-ocaml/build/ocaml/otherlibs/systhreads/st_win32.h	2013-03-22 18:31:05.256880360 -0500
@@ -17,7 +17,7 @@
 
 #define _WIN32_WINNT 0x0400
 #include <windows.h>
-#include <WinError.h>
+#include <winerror.h>
 #include <stdio.h>
 #include <signal.h>
 
